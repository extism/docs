---
title: Host Functions
sidebar_position: 2
---

import SDKLogoLinks from '@site/src/components/SDKLogoLinks';

# Host Functions

If you find yourself wanting to provide a plug-in with more custom capabilities, beyond what Extism 
provides by default (loading input, setting output, persisting variables, etc), then Host Functions 
may be the solution. 

Typically, plug-ins will simply take some state from a host, run some logic, and set output for the
host to read after the plug-in has finished its execution. But, what if you want your plug-in to be
able to interact more deeply with the host environment. Maybe submit a database query for the host 
to run on the plug-in's behalf? This is where Host Functions become very powerful, creating a more
"bi-directional" relationship between host programs and plug-ins. Rather than only the host application
invoking plug-in code, Host Functions make it possible for a plug-in to invoke host application code.

A Host Function is essentially a custom function that your host "injects" into a plug-in and appears
to the plug-in a WebAssembly "import" or an `extern` function declaration, for which syntax varies
between programming languages. There are examples in each of the SDK documentation pages, so please
refer to those for specifics about the SDK language you are using.

## Usage

Currently, the following list of SDKs support Host Functions. Please reach out on [Discord](https://discord.gg/cx3usBCWnc) 
or open an issue on [GitHub](https://github.com/extism/extism/issues) if you'd like to see support
added for your language, or if you would like help contributing support!

<div className="sdk-quickstart">
    <SDKLogoLinks only={["C", "C++", "Go", "Node", "Python", "Rust", "OCaml"]}/>
</div>


Please refer to the SDK documentation for usage about Host Functions by clicking one of the languages
listed above.

## Function Signatures

### Data Types

Generally, you will need to understand how to translate the data types in your Host Function's
signature to the ones available in a PDK from which the function is called. The following table 
describes these data types. 

| Host Function Type | Rust | Go | Haskell | AssemblyScript | C | Zig | JavaScript |
| ------------------ | ---- | -- | ------- | -------------- | - | --- | ---------- |
| `I32`✝ | `i32`, `isize`, `u32`, `usize` | `int32`, `uint32`, `int` | ? | `i32`, `isize`, `u32`, `usize` | `int32_t`, `uint32_t` | `i32`, `isize`, `u32`, `usize` | ⌛|
| `I64` | `i64`, `u64` | `int64`, `uint64` | ? | `i64`, `u64` | `int64_t`, `uint64_t` | `i64`, `u64` | ⌛|
| `F32` | `f32` | `float32` | ? | `f32` | `float` | `f32` | ⌛|
| `F64` | `f64` | `float64` | ? | `f64` | `double` | `f64` | ⌛|
| `V128` | N/A | N/A | ? | `v128` | `long double` | ⌛| | ⌛|
| `FuncRef` | N/A | N/A | N/A | N/A | N/A | N/A | N/A |
| `ExternRef` | N/A | N/A | N/A | N/A | N/A | N/A | N/A |

> ✝ = can also be used for any integer size smaller than 32-bit

### UserData 

A value that is passed each time a Host Function is invoked from the plug-in.

It is handle to data from the host that's available inside the host function. The host and plug-in 
must agree on the type and functionality of this value. It can be thought of as an opaque pointer.

The `UserData` value must live at least as long as the `Context` from within which the plug-in is 
managed.

## Calling from Plug-ins

Host Functions must be declared as `extern` functions within your plug-in code. Doing so depends on
the language that the plug-in is developed in. Please see the individual [PDK documentation](/docs/category/write-a-plug-in) pages
for more information and examples about calling Host Functions from a plug-in.

### Example PDK

Here is an example plug-in in [Go](/docs/write-a-plugin/go-pdk) which calls a Host Function:

```go title=plugin.go
package main

import (
    "github.com/extism/go-pdk"
)


func main() {}
package main

import (
	"strconv"

	"github.com/extism/go-pdk"
)

// `hello_world` declared below, is a function provided by the host and is linked as a WebAssembly
// "import" available to the plug-in. By adding the `export $function_name` annotation, the TinyGo
// compiler knows that this is an external function.

//export hello_world
func hello_world(x uint64) uint64

//export say_hello
func say_hello() int32 {
	input := pdk.InputString()

	// Create output, this will be passed through `hello_world`
	output := "Hello, " + input
	mem := pdk.AllocateString(output)

	// Call `hello_world` host function, it accepts an offset in memory and
	// returns an offset in memory
	offs := hello_world(mem.Offset())
	mem = pdk.FindMemory(offs)

	pdk.OutputMemory(mem)
	return 0
}

func main() {}
```


## Need help?

If you've encountered a bug or think something is missing, please open an issue on the [Extism GitHub](https://github.com/extism/extism) repository.

There is an active community on [Discord](https://discord.gg/cx3usBCWnc) where the project maintainers and users can help you. Come hang out!

